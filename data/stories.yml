version: "3.1"

stories:
- story: User books an appointment
  steps:
    - intent: book_appointment
    - action: appointment_form
    - active_loop: appointment_form
    - slot_was_set:
        - user_name
    - slot_was_set:
        - user_email
    - active_loop: null
    - action: action_book_appointment
    - intent: confirm_appointment
    - action: utter_confirm_appointment

- story: User asks for available dates first
  steps:
    - intent: ask_available_dates
    - action: utter_show_available_dates
    - action: action_get_available_dates
    - intent: book_appointment
    - action: appointment_form
    - active_loop: appointment_form
    - intent: select_date
    - action: action_book_appointment
    - intent: confirm_appointment
    - action: utter_confirm_appointment

- story: User cancels an appointment
  steps:
    - intent: cancel_appointment
    - action: utter_cancel_appointment
    - action: action_cancel_appointment
    - intent: goodbye
    - action: utter_goodbye

- story: Greet user and offer help (new)
  steps:
    - intent: greet
    - action: utter_greet

- story: User asks a general question
  steps:
    - intent: faq
    - action: utter_reschedule
    # - action: action_chat_with_gpt

- story: User wants to reschedule appointment
  steps:
    - intent: reschedule_appointment
    - action: utter_reschedule
    - active_loop: appointment_form
    - slot_was_set:
        - appointment_date
    - active_loop: null
    - action: action_reschedule_appointment
    - action: utter_confirm_appointment